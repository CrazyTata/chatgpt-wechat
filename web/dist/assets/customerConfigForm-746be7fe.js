/*! 
 Build based on gin-vue-admin 
 Time : 1685443405000 */
import{P as e,u as l,r as a,a as o,o as d,c as t,b as u,d as r,w as m,g as p,i as s,j as i,E as n}from"./index-fb186a27.js";import{a as c,E as b}from"./form-item-019c124a.js";/* empty css               */import{E as f}from"./input-number-9db357c3.js";/* empty css              */import{E as v}from"./switch-db0e60fb.js";import{f as V,c as g,u as j}from"./customerConfig-62cc7e3b.js";import"./date-225eaf4f.js";import"./dictionary-2fb273d4.js";import"./_baseClone-b86febe7.js";import"./_Uint8Array-78093811.js";import"./_initCloneObject-3042abe3.js";import"./index-34e0c723.js";import"./sysDictionary-f8cc9986.js";const _={class:"gva-form-box"},y={name:"CustomerConfig"},k=Object.assign(y,{setup(y){const k=e(),h=l(),C=a(""),x=a({kfId:"",kfName:"",prompt:"",postModel:"",embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0}),M=o({}),U=a();(async()=>{if(k.query.id){const e=await V({ID:k.query.id});0===e.code&&(x.value=e.data.recustomerConfig,C.value="update")}else C.value="create"})();const E=async()=>{var e;null==(e=U.value)||e.validate((async e=>{if(!e)return;let l;switch(C.value){case"create":default:l=await g(x.value);break;case"update":l=await j(x.value)}0===l.code&&s({type:"success",message:"创建/更改成功"})}))},w=()=>{h.go(-1)};return(e,l)=>{const a=i,o=c,s=v,V=f,g=n,j=b;return d(),t("div",null,[u("div",_,[r(j,{model:x.value,ref_key:"elFormRef",ref:U,"label-position":"right",rules:M,"label-width":"80px"},{default:m((()=>[r(o,{label:"客服ID:",prop:"kfId"},{default:m((()=>[r(a,{modelValue:x.value.kfId,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value.kfId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"kfName字段:",prop:"kfName"},{default:m((()=>[r(a,{modelValue:x.value.kfName,"onUpdate:modelValue":l[1]||(l[1]=e=>x.value.kfName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"prompt字段:",prop:"prompt"},{default:m((()=>[r(a,{modelValue:x.value.prompt,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value.prompt=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"发送请求的model:",prop:"postModel"},{default:m((()=>[r(a,{modelValue:x.value.postModel,"onUpdate:modelValue":l[3]||(l[3]=e=>x.value.postModel=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"是否启用embedding:",prop:"embeddingEnable"},{default:m((()=>[r(s,{modelValue:x.value.embeddingEnable,"onUpdate:modelValue":l[4]||(l[4]=e=>x.value.embeddingEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),r(o,{label:"embedding的搜索模式:",prop:"embeddingMode"},{default:m((()=>[r(a,{modelValue:x.value.embeddingMode,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value.embeddingMode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"分数:",prop:"score"},{default:m((()=>[r(V,{modelValue:x.value.score,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value.score=e),precision:2,clearable:!0},null,8,["modelValue"])])),_:1}),r(o,{label:"topK:",prop:"topK"},{default:m((()=>[r(a,{modelValue:x.value.topK,"onUpdate:modelValue":l[7]||(l[7]=e=>x.value.topK=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"需要清理上下文的时间，按分配置，默认0不清理:",prop:"clearContextTime"},{default:m((()=>[r(a,{modelValue:x.value.clearContextTime,"onUpdate:modelValue":l[8]||(l[8]=e=>x.value.clearContextTime=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,null,{default:m((()=>[r(g,{type:"primary",onClick:E},{default:m((()=>[p("保存")])),_:1}),r(g,{type:"primary",onClick:w},{default:m((()=>[p("返回")])),_:1})])),_:1})])),_:1},8,["model","rules"])])])}}});export{k as default};
