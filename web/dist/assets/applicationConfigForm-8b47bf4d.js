/*! 
 Build based on chatgpt-wechat-admin 
 Time : 1685686675000 */
import{P as e,u as l,r as a,a as o,o as t,c as u,b as d,d as r,w as p,g as m,i as n,j as i,E as c}from"./index-c0e4adfc.js";import{a as s,E as b}from"./form-item-2334633e.js";/* empty css               */import{E as v}from"./input-number-a9f9fe75.js";/* empty css              */import{E as f}from"./switch-bf5d3f64.js";import{f as V,c as g,u as _}from"./applicationConfig-15b25653.js";import"./date-225eaf4f.js";import"./dictionary-8715b49d.js";import"./_baseClone-8e8c462c.js";import"./_Uint8Array-51a2700d.js";import"./_initCloneObject-fdddb50e.js";import"./index-117497ec.js";import"./sysDictionary-fa38e7c5.js";const h={class:"gva-form-box"},j={name:"ApplicationConfig"},y=Object.assign(j,{setup(j){const y=e(),C=l(),x=a(""),E=a({agentId:0,agentSecret:"",agentName:"",model:"",postModel:"",basePrompt:"",welcome:"",groupEnable:!1,embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0,groupName:"",groupChatId:""}),U=o({}),w=a();(async()=>{if(y.query.id){const e=await V({ID:y.query.id});0===e.code&&(E.value=e.data.reapplicationConfig,x.value="update")}else x.value="create"})();const M=async()=>{var e;null==(e=w.value)||e.validate((async e=>{if(!e)return;let l;switch(x.value){case"create":default:l=await g(E.value);break;case"update":l=await _(E.value)}0===l.code&&n({type:"success",message:"创建/更改成功"})}))},N=()=>{C.go(-1)};return(e,l)=>{const a=i,o=s,n=f,V=v,g=c,_=b;return t(),u("div",null,[d("div",h,[r(_,{model:E.value,ref_key:"elFormRef",ref:w,"label-position":"right",rules:U,"label-width":"80px"},{default:p((()=>[r(o,{label:"应用:",prop:"agentName"},{default:p((()=>[r(a,{modelValue:E.value.agentName,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value.agentName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"model:",prop:"postModel"},{default:p((()=>[r(a,{modelValue:E.value.postModel,"onUpdate:modelValue":l[1]||(l[1]=e=>E.value.postModel=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"prompt:",prop:"basePrompt"},{default:p((()=>[r(a,{modelValue:E.value.basePrompt,"onUpdate:modelValue":l[2]||(l[2]=e=>E.value.basePrompt=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"欢迎语:",prop:"welcome"},{default:p((()=>[r(a,{modelValue:E.value.welcome,"onUpdate:modelValue":l[3]||(l[3]=e=>E.value.welcome=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"启用EM:",prop:"embeddingEnable"},{default:p((()=>[r(n,{modelValue:E.value.embeddingEnable,"onUpdate:modelValue":l[4]||(l[4]=e=>E.value.embeddingEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),r(o,{label:"搜索模式:",prop:"embeddingMode"},{default:p((()=>[r(a,{modelValue:E.value.embeddingMode,"onUpdate:modelValue":l[5]||(l[5]=e=>E.value.embeddingMode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"分数:",prop:"score"},{default:p((()=>[r(V,{modelValue:E.value.score,"onUpdate:modelValue":l[6]||(l[6]=e=>E.value.score=e),precision:2,clearable:!0},null,8,["modelValue"])])),_:1}),r(o,{label:"topK:",prop:"topK"},{default:p((()=>[r(a,{modelValue:E.value.topK,"onUpdate:modelValue":l[7]||(l[7]=e=>E.value.topK=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"清理时间:",prop:"clearContextTime"},{default:p((()=>[r(a,{modelValue:E.value.clearContextTime,"onUpdate:modelValue":l[8]||(l[8]=e=>E.value.clearContextTime=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"启用群:",prop:"groupEnable"},{default:p((()=>[r(n,{modelValue:E.value.groupEnable,"onUpdate:modelValue":l[9]||(l[9]=e=>E.value.groupEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),r(o,{label:"群名:",prop:"groupName"},{default:p((()=>[r(a,{modelValue:E.value.groupName,"onUpdate:modelValue":l[10]||(l[10]=e=>E.value.groupName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"群chat_id:",prop:"groupChatId"},{default:p((()=>[r(a,{modelValue:E.value.groupChatId,"onUpdate:modelValue":l[11]||(l[11]=e=>E.value.groupChatId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,null,{default:p((()=>[r(g,{type:"primary",onClick:M},{default:p((()=>[m("保存")])),_:1}),r(g,{type:"primary",onClick:N},{default:p((()=>[m("返回")])),_:1})])),_:1})])),_:1},8,["model","rules"])])])}}});export{y as default};
