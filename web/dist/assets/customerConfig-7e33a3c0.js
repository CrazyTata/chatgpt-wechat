/*! 
 Build based on chatgpt-wechat-admin 
 Time : 1685686675000 */
import{r as e,a as l,o as a,c as t,b as o,d,w as i,g as r,l as u,t as n,G as p,O as s,i as m,j as c,E as v}from"./index-c0e4adfc.js";import{E as f}from"./dialog-24cefcc5.js";import"./overlay-0e3768b7.js";import{E as b}from"./input-number-a9f9fe75.js";/* empty css              */import{E as g}from"./switch-bf5d3f64.js";import{E as y}from"./pagination-6acfc931.js";import"./tag-06e34f44.js";import"./select-51c947b5.js";import"./scrollbar-83387f5b.js";/* empty css               */import{E as h,a as j}from"./table-column-ce61bdda.js";import"./checkbox-4e2047b2.js";/* empty css                */import{E as V}from"./popover-3969edac.js";import{a as _,E as C}from"./form-item-2334633e.js";/* empty css               */import{E as k}from"./date-picker-8073d356.js";import{g as w,d as x,f as E,a as M,c as U,u as K}from"./customerConfig-46016fc4.js";import{f as T,a as z}from"./format-d58b80c9.js";import"./index-117497ec.js";import"./isEqual-b7679b47.js";import"./_Uint8Array-51a2700d.js";import"./index-3aa8858d.js";import"./index-6f1ff6e5.js";import"./strings-df073129.js";import"./_initCloneObject-fdddb50e.js";import"./dropdown-17261785.js";import"./_baseClone-8e8c462c.js";import"./arrays-2c626d3b.js";import"./date-225eaf4f.js";import"./dictionary-8715b49d.js";import"./sysDictionary-fa38e7c5.js";const I={class:"gva-search-box"},N={class:"gva-table-box"},D={class:"gva-btn-list"},A=o("p",null,"确定要删除吗？",-1),S={style:{"text-align":"right","margin-top":"8px"}},O={class:"gva-pagination"},q={class:"dialog-footer"},B={name:"CustomerConfig"},F=Object.assign(B,{setup(B){const F=e({kfId:"",kfName:"",prompt:"",postModel:"",embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0}),G=l({}),R=e(),W=e(1),X=e(0),Y=e(10),Z=e([]),$=e({}),H=()=>{$.value={},Q()},J=()=>{W.value=1,Y.value=10,""===$.value.embeddingEnable&&($.value.embeddingEnable=null),Q()},L=e=>{Y.value=e,Q()},P=e=>{W.value=e,Q()},Q=async()=>{const e=await w({page:W.value,pageSize:Y.value,...$.value});0===e.code&&(Z.value=e.data.list,X.value=e.data.total,W.value=e.data.page,Y.value=e.data.pageSize)};Q();(async()=>{})();const ee=e([]),le=e=>{ee.value=e},ae=e(!1),te=async()=>{const e=[];if(0===ee.value.length)return void m({type:"warning",message:"请选择要删除的数据"});ee.value&&ee.value.map((l=>{e.push(l.ID)}));0===(await x({ids:e})).code&&(m({type:"success",message:"删除成功"}),Z.value.length===e.length&&W.value>1&&W.value--,ae.value=!1,Q())},oe=e(""),de=async e=>{0===(await M({ID:e.ID})).code&&(m({type:"success",message:"删除成功"}),1===Z.value.length&&W.value>1&&W.value--,Q())},ie=e(!1),re=()=>{oe.value="create",ie.value=!0},ue=()=>{ie.value=!1,F.value={kfId:"",kfName:"",prompt:"",postModel:"",embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0}},ne=async()=>{var e;null==(e=R.value)||e.validate((async e=>{if(!e)return;let l;switch(oe.value){case"create":default:l=await U(F.value);break;case"update":l=await K(F.value)}0===l.code&&(m({type:"success",message:"创建/更改成功"}),ue(),Q())}))};return(e,l)=>{const m=k,w=_,x=c,M=v,U=C,K=V,B=h,Q=j,pe=y,se=g,me=b,ce=f;return a(),t("div",null,[o("div",I,[d(U,{inline:!0,model:$.value,class:"demo-form-inline",onKeyup:u(J,["enter"])},{default:i((()=>[d(w,{label:"创建时间"},{default:i((()=>[d(m,{modelValue:$.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>$.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),r(" — "),d(m,{modelValue:$.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>$.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),d(w,{label:"客服"},{default:i((()=>[d(x,{modelValue:$.value.kfName,"onUpdate:modelValue":l[2]||(l[2]=e=>$.value.kfName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(w,null,{default:i((()=>[d(M,{type:"primary",icon:"search",onClick:J},{default:i((()=>[r("查询")])),_:1}),d(M,{icon:"refresh",onClick:H},{default:i((()=>[r("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",N,[o("div",D,[d(M,{type:"primary",icon:"plus",onClick:re},{default:i((()=>[r("新增")])),_:1}),d(K,{visible:ae.value,"onUpdate:visible":l[5]||(l[5]=e=>ae.value=e),placement:"top",width:"160"},{reference:i((()=>[d(M,{icon:"delete",style:{"margin-left":"10px"},disabled:!ee.value.length,onClick:l[4]||(l[4]=e=>ae.value=!0)},{default:i((()=>[r("删除")])),_:1},8,["disabled"])])),default:i((()=>[A,o("div",S,[d(M,{type:"primary",link:"",onClick:l[3]||(l[3]=e=>ae.value=!1)},{default:i((()=>[r("取消")])),_:1}),d(M,{type:"primary",onClick:te},{default:i((()=>[r("确定")])),_:1})])])),_:1},8,["visible"])]),d(Q,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Z.value,"row-key":"ID",onSelectionChange:le},{default:i((()=>[d(B,{type:"selection",width:"55"}),d(B,{align:"left",label:"日期",width:"160"},{default:i((e=>[r(n(p(T)(e.row.CreatedAt)),1)])),_:1}),d(B,{align:"left",label:"客服",prop:"kfName",width:"100"}),d(B,{align:"left",label:"prompt",prop:"prompt",width:"480"}),d(B,{align:"left",label:"model",prop:"postModel",width:"100"}),d(B,{align:"left",label:"启用EM",prop:"embeddingEnable",width:"60"},{default:i((e=>[r(n(p(z)(e.row.embeddingEnable)),1)])),_:1}),d(B,{align:"left",label:"搜索模式",prop:"embeddingMode",width:"100"}),d(B,{align:"left",label:"分数",prop:"score",width:"60"}),d(B,{align:"left",label:"topK",prop:"topK",width:"80"}),d(B,{align:"left",label:"清理时间",prop:"clearContextTime",width:"100"}),d(B,{align:"left",label:"按钮组"},{default:i((e=>[d(M,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await E({ID:e.ID});oe.value="update",0===l.code&&(F.value=l.data.recustomerConfig,ie.value=!0)})(e.row)},{default:i((()=>[r("变更")])),_:2},1032,["onClick"]),d(M,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void s.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{de(a)}));var a}},{default:i((()=>[r("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",O,[d(pe,{layout:"total, sizes, prev, pager, next, jumper","current-page":W.value,"page-size":Y.value,"page-sizes":[10,30,50,100],total:X.value,onCurrentChange:P,onSizeChange:L},null,8,["current-page","page-size","total"])])]),d(ce,{modelValue:ie.value,"onUpdate:modelValue":l[14]||(l[14]=e=>ie.value=e),"before-close":ue,title:"弹窗操作"},{footer:i((()=>[o("div",q,[d(M,{onClick:ue},{default:i((()=>[r("取 消")])),_:1}),d(M,{type:"primary",onClick:ne},{default:i((()=>[r("确 定")])),_:1})])])),default:i((()=>[d(U,{model:F.value,"label-position":"right",ref_key:"elFormRef",ref:R,rules:G,"label-width":"80px"},{default:i((()=>[d(w,{label:"客服:",prop:"kfName"},{default:i((()=>[d(x,{modelValue:F.value.kfName,"onUpdate:modelValue":l[6]||(l[6]=e=>F.value.kfName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"prompt:",prop:"prompt"},{default:i((()=>[d(x,{modelValue:F.value.prompt,"onUpdate:modelValue":l[7]||(l[7]=e=>F.value.prompt=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"model:",prop:"postModel"},{default:i((()=>[d(x,{modelValue:F.value.postModel,"onUpdate:modelValue":l[8]||(l[8]=e=>F.value.postModel=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"启用EM:",prop:"embeddingEnable"},{default:i((()=>[d(se,{modelValue:F.value.embeddingEnable,"onUpdate:modelValue":l[9]||(l[9]=e=>F.value.embeddingEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),d(w,{label:"搜索模式:",prop:"embeddingMode"},{default:i((()=>[d(x,{modelValue:F.value.embeddingMode,"onUpdate:modelValue":l[10]||(l[10]=e=>F.value.embeddingMode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"分数:",prop:"score"},{default:i((()=>[d(me,{modelValue:F.value.score,"onUpdate:modelValue":l[11]||(l[11]=e=>F.value.score=e),style:{width:"100%"},precision:2,clearable:!0},null,8,["modelValue"])])),_:1}),d(w,{label:"topK:",prop:"topK"},{default:i((()=>[d(x,{modelValue:F.value.topK,"onUpdate:modelValue":l[12]||(l[12]=e=>F.value.topK=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"清理时间:",prop:"clearContextTime"},{default:i((()=>[d(x,{modelValue:F.value.clearContextTime,"onUpdate:modelValue":l[13]||(l[13]=e=>F.value.clearContextTime=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{F as default};
