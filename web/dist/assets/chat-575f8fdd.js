/*! 
 Build based on chatgpt-wechat-admin 
 Time : 1685686675000 */
import{P as e,a as l,r as a,Q as t,o,c as d,b as r,d as u,w as i,g as n,R as s,p,G as m,l as c,t as f,j as _,E as v}from"./index-c0e4adfc.js";import{E as b}from"./dialog-24cefcc5.js";import"./overlay-0e3768b7.js";import{E as g}from"./pagination-6acfc931.js";/* empty css              */import"./tag-06e34f44.js";import"./select-51c947b5.js";import"./scrollbar-83387f5b.js";/* empty css               */import{E as V,a as j}from"./table-column-ce61bdda.js";import"./checkbox-4e2047b2.js";/* empty css                */import{a as h,E as y}from"./form-item-2334633e.js";/* empty css               */import{E as k}from"./date-picker-8073d356.js";import{g as w,e as C}from"./chat-c7bbfd8d.js";import{f as x}from"./format-d58b80c9.js";import"./isEqual-b7679b47.js";import"./_Uint8Array-51a2700d.js";import"./index-3aa8858d.js";import"./index-6f1ff6e5.js";import"./strings-df073129.js";import"./_initCloneObject-fdddb50e.js";import"./_baseClone-8e8c462c.js";import"./arrays-2c626d3b.js";import"./index-117497ec.js";import"./date-225eaf4f.js";import"./dictionary-8715b49d.js";import"./sysDictionary-fa38e7c5.js";const U={class:"gva-search-box"},E={class:"gva-table-box"},q={class:"gva-pagination"},z={name:"Chat"},A=Object.assign(z,{setup(z){const A=e().meta.btns||l({}),S=a({user:"",message_id:"",open_kf_id:"",agent_id:0,req_content:"",res_content:""}),D=l({}),F=a(),K=a(1),M=a(0),O=a(10),R=a([]),B=a({}),G=()=>{B.value={},W()},I=()=>{K.value=1,O.value=10,W()},P=()=>{X()},Q=e=>{O.value=e,W()},T=e=>{K.value=e,W()},W=async()=>{const e=await w({page:K.value,pageSize:O.value,...B.value});0===e.code&&(R.value=e.data.list,M.value=e.data.total,K.value=e.data.page,O.value=e.data.pageSize)},X=async()=>{const e=await C({...B.value});0===e.code&&new Blob([e.data],{type:"application/vnd.ms-excel"})};W();(async()=>{})();const Y=a([]),Z=e=>{Y.value=e};return(e,l)=>{const a=k,w=h,C=_,z=v,W=y,X=V,Y=j,$=g,H=b,J=t("auth");return o(),d("div",null,[r("div",U,[u(W,{inline:!0,model:B.value,class:"demo-form-inline",onKeyup:c(I,["enter"])},{default:i((()=>[u(w,{label:"创建时间"},{default:i((()=>[u(a,{modelValue:B.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>B.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),n(" — "),u(a,{modelValue:B.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>B.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),u(w,{label:"用户"},{default:i((()=>[u(C,{modelValue:B.value.user,"onUpdate:modelValue":l[2]||(l[2]=e=>B.value.user=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),u(w,{label:"客服"},{default:i((()=>[u(C,{modelValue:B.value.open_kf_id,"onUpdate:modelValue":l[3]||(l[3]=e=>B.value.open_kf_id=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),u(w,{label:"应用"},{default:i((()=>[u(C,{modelValue:B.value.agent_id,"onUpdate:modelValue":l[4]||(l[4]=e=>B.value.agent_id=e),modelModifiers:{number:!0},placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),u(w,null,{default:i((()=>[u(z,{type:"primary",icon:"search",onClick:I},{default:i((()=>[n("查询")])),_:1}),u(z,{icon:"refresh",onClick:G},{default:i((()=>[n("重置")])),_:1}),s((o(),p(z,{icon:"download",onClick:P},{default:i((()=>[n("导出")])),_:1})),[[J,m(A).chatExport]])])),_:1})])),_:1},8,["model","onKeyup"])]),r("div",E,[u(Y,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:R.value,"row-key":"ID",onSelectionChange:Z},{default:i((()=>[u(X,{type:"selection",width:"55"}),u(X,{align:"left",label:"日期",width:"180"},{default:i((e=>[n(f(m(x)(e.row.CreatedAt)),1)])),_:1}),u(X,{align:"left",label:"用户",prop:"user",width:"120"}),u(X,{align:"left",label:"客服",prop:"open_kf_id",width:"120"}),u(X,{align:"left",label:"应用",prop:"agent_id",width:"120"}),u(X,{align:"left",label:"发送内容",prop:"req_content",width:"120"}),u(X,{align:"left",label:"响应内容",prop:"res_content",width:"480"})])),_:1},8,["data"]),r("div",q,[u($,{layout:"total, sizes, prev, pager, next, jumper","current-page":K.value,"page-size":O.value,"page-sizes":[10,30,50,100],total:M.value,onCurrentChange:T,onSizeChange:Q},null,8,["current-page","page-size","total"])])]),u(H,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[10]||(l[10]=l=>e.dialogFormVisible=l),"before-close":e.closeDialog,title:"弹窗操作"},{default:i((()=>[u(W,{model:S.value,"label-position":"right",ref_key:"elFormRef",ref:F,rules:D,"label-width":"80px"},{default:i((()=>[u(w,{label:"用户:",prop:"user"},{default:i((()=>[u(C,{modelValue:S.value.user,"onUpdate:modelValue":l[5]||(l[5]=e=>S.value.user=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),u(w,{label:"客服:",prop:"open_kf_id"},{default:i((()=>[u(C,{modelValue:S.value.open_kf_id,"onUpdate:modelValue":l[6]||(l[6]=e=>S.value.open_kf_id=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),u(w,{label:"应用:",prop:"agent_id"},{default:i((()=>[u(C,{modelValue:S.value.agent_id,"onUpdate:modelValue":l[7]||(l[7]=e=>S.value.agent_id=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),u(w,{label:"发送内容:",prop:"req_content"},{default:i((()=>[u(C,{modelValue:S.value.req_content,"onUpdate:modelValue":l[8]||(l[8]=e=>S.value.req_content=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),u(w,{label:"响应内容:",prop:"res_content"},{default:i((()=>[u(C,{modelValue:S.value.res_content,"onUpdate:modelValue":l[9]||(l[9]=e=>S.value.res_content=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","before-close"])])}}});export{A as default};
