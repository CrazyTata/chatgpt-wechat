/*! 
 Build based on chatgpt-wechat-admin 
 Time : 1685686675000 */
import{v as e,r as a,av as l,o as t,c as o,b as r,d as i,w as s,g as u,t as p,G as d,p as n,i as c,j as m,E as v,J as f}from"./index-c0e4adfc.js";import{E as g}from"./pagination-6acfc931.js";/* empty css              */import"./tag-06e34f44.js";import"./select-51c947b5.js";import"./scrollbar-83387f5b.js";/* empty css               */import{E as y,a as h}from"./table-column-ce61bdda.js";import"./checkbox-4e2047b2.js";/* empty css                *//* empty css             */import{E as b}from"./popover-3969edac.js";import{a as w,E as j}from"./form-item-2334633e.js";/* empty css               */import{f as _}from"./format-d58b80c9.js";import{E as k}from"./index-6f1ff6e5.js";import"./isEqual-b7679b47.js";import"./_Uint8Array-51a2700d.js";import"./index-3aa8858d.js";import"./strings-df073129.js";import"./_initCloneObject-fdddb50e.js";import"./dropdown-17261785.js";import"./_baseClone-8e8c462c.js";import"./date-225eaf4f.js";import"./dictionary-8715b49d.js";import"./sysDictionary-fa38e7c5.js";const C={class:"gva-search-box"},V={class:"gva-table-box"},x={class:"gva-btn-list"},O=r("p",null,"确定要删除吗？",-1),S={style:{"text-align":"right","margin-top":"8px"}},E={class:"popover-box"},z={key:1},R={class:"popover-box"},U={key:1},I=r("p",null,"确定要删除吗？",-1),D={style:{"text-align":"right","margin-top":"8px"}},N={class:"gva-pagination"},A={name:"SysOperationRecord"},J=Object.assign(A,{setup(A){const J=a(1),q=a(0),B=a(10),G=a([]),L=a({}),P=()=>{L.value={}},T=()=>{J.value=1,B.value=10,""===L.value.status&&(L.value.status=null),Y()},W=e=>{B.value=e,Y()},X=e=>{J.value=e,Y()},Y=async()=>{const a=await(l={page:J.value,pageSize:B.value,...L.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:l}));var l;0===a.code&&(G.value=a.data.list,q.value=a.data.total,J.value=a.data.page,B.value=a.data.pageSize)};Y();const Z=a(!1),$=a([]),F=e=>{$.value=e},H=async()=>{const a=[];$.value&&$.value.forEach((e=>{a.push(e.ID)}));var l;0===(await(l={ids:a},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),G.value.length===a.length&&J.value>1&&J.value--,Z.value=!1,Y())},K=async a=>{a.visible=!1;var l;0===(await(l={ID:a.ID},e({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),1===G.value.length&&J.value>1&&J.value--,Y())},M=e=>{try{return JSON.parse(e)}catch(a){return e}};return(e,a)=>{const c=m,A=w,Y=v,Q=j,ee=b,ae=y,le=k,te=l("warning"),oe=f,re=h,ie=g;return t(),o("div",null,[r("div",C,[i(Q,{inline:!0,model:L.value},{default:s((()=>[i(A,{label:"请求方法"},{default:s((()=>[i(c,{modelValue:L.value.method,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,{label:"请求路径"},{default:s((()=>[i(c,{modelValue:L.value.path,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,{label:"结果状态码"},{default:s((()=>[i(c,{modelValue:L.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),i(A,null,{default:s((()=>[i(Y,{type:"primary",icon:"search",onClick:T},{default:s((()=>[u("查询")])),_:1}),i(Y,{icon:"refresh",onClick:P},{default:s((()=>[u("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),r("div",V,[r("div",x,[i(ee,{modelValue:Z.value,"onUpdate:modelValue":a[5]||(a[5]=e=>Z.value=e),placement:"top",width:"160"},{reference:s((()=>[i(Y,{icon:"delete",style:{"margin-left":"10px"},disabled:!$.value.length,onClick:a[4]||(a[4]=e=>Z.value=!0)},{default:s((()=>[u("删除")])),_:1},8,["disabled"])])),default:s((()=>[O,r("div",S,[i(Y,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>Z.value=!1)},{default:s((()=>[u("取消")])),_:1}),i(Y,{type:"primary",onClick:H},{default:s((()=>[u("确定")])),_:1})])])),_:1},8,["modelValue"])]),i(re,{ref:"multipleTable",data:G.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:F},{default:s((()=>[i(ae,{align:"left",type:"selection",width:"55"}),i(ae,{align:"left",label:"操作人",width:"140"},{default:s((e=>[r("div",null,p(e.row.user.userName)+"("+p(e.row.user.nickName)+")",1)])),_:1}),i(ae,{align:"left",label:"日期",width:"180"},{default:s((e=>[u(p(d(_)(e.row.CreatedAt)),1)])),_:1}),i(ae,{align:"left",label:"状态码",prop:"status",width:"120"},{default:s((e=>[r("div",null,[i(le,{type:"success"},{default:s((()=>[u(p(e.row.status),1)])),_:2},1024)])])),_:1}),i(ae,{align:"left",label:"请求IP",prop:"ip",width:"120"}),i(ae,{align:"left",label:"请求方法",prop:"method",width:"120"}),i(ae,{align:"left",label:"请求路径",prop:"path",width:"240"}),i(ae,{align:"left",label:"请求",prop:"path",width:"80"},{default:s((e=>[r("div",null,[e.row.body?(t(),n(ee,{key:0,placement:"left-start",trigger:"click"},{reference:s((()=>[i(oe,{style:{cursor:"pointer"}},{default:s((()=>[i(te)])),_:1})])),default:s((()=>[r("div",E,[r("pre",null,p(M(e.row.body)),1)])])),_:2},1024)):(t(),o("span",z,"无"))])])),_:1}),i(ae,{align:"left",label:"响应",prop:"path",width:"80"},{default:s((e=>[r("div",null,[e.row.resp?(t(),n(ee,{key:0,placement:"left-start",trigger:"click"},{reference:s((()=>[i(oe,{style:{cursor:"pointer"}},{default:s((()=>[i(te)])),_:1})])),default:s((()=>[r("div",R,[r("pre",null,p(M(e.row.resp)),1)])])),_:2},1024)):(t(),o("span",U,"无"))])])),_:1}),i(ae,{align:"left",label:"按钮组"},{default:s((e=>[i(ee,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:s((()=>[i(Y,{icon:"delete",type:"primary",link:"",onClick:a=>e.row.visible=!0},{default:s((()=>[u("删除")])),_:2},1032,["onClick"])])),default:s((()=>[I,r("div",D,[i(Y,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:s((()=>[u("取消")])),_:2},1032,["onClick"]),i(Y,{type:"primary",onClick:a=>K(e.row)},{default:s((()=>[u("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),r("div",N,[i(ie,{"current-page":J.value,"page-size":B.value,"page-sizes":[10,30,50,100],total:q.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:X,onSizeChange:W},null,8,["current-page","page-size","total"])])])])}}});export{J as default};
