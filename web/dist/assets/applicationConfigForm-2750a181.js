/*! 
 Build based on gin-vue-admin 
 Time : 1685443405000 */
import{P as e,u as l,r as a,a as o,o as d,c as t,b as u,d as r,w as m,g as p,i as n,j as i,E as c}from"./index-fb186a27.js";import{a as s,E as b}from"./form-item-019c124a.js";/* empty css               */import{E as v}from"./input-number-9db357c3.js";/* empty css              */import{E as V}from"./switch-db0e60fb.js";import{f,c as g,u as h}from"./applicationConfig-139f189d.js";import"./date-225eaf4f.js";import"./dictionary-2fb273d4.js";import"./_baseClone-b86febe7.js";import"./_Uint8Array-78093811.js";import"./_initCloneObject-3042abe3.js";import"./index-34e0c723.js";import"./sysDictionary-f8cc9986.js";const _={class:"gva-form-box"},C={name:"ApplicationConfig"},j=Object.assign(C,{setup(C){const j=e(),U=l(),y=a(""),x=a({agentId:0,agentSecret:"",agentName:"",model:"",postModel:"",basePrompt:"",welcome:"",groupEnable:!1,embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0,groupName:"",groupChatId:""}),E=o({}),w=a();(async()=>{if(j.query.id){const e=await f({ID:j.query.id});0===e.code&&(x.value=e.data.reapplicationConfig,y.value="update")}else y.value="create"})();const M=async()=>{var e;null==(e=w.value)||e.validate((async e=>{if(!e)return;let l;switch(y.value){case"create":default:l=await g(x.value);break;case"update":l=await h(x.value)}0===l.code&&n({type:"success",message:"创建/更改成功"})}))},I=()=>{U.go(-1)};return(e,l)=>{const a=i,o=s,n=V,f=v,g=c,h=b;return d(),t("div",null,[u("div",_,[r(h,{model:x.value,ref_key:"elFormRef",ref:w,"label-position":"right",rules:E,"label-width":"80px"},{default:m((()=>[r(o,{label:"应用ID:",prop:"agentId"},{default:m((()=>[r(a,{modelValue:x.value.agentId,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value.agentId=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"应用secret:",prop:"agentSecret"},{default:m((()=>[r(a,{modelValue:x.value.agentSecret,"onUpdate:modelValue":l[1]||(l[1]=e=>x.value.agentSecret=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"应用名:",prop:"agentName"},{default:m((()=>[r(a,{modelValue:x.value.agentName,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value.agentName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"model:",prop:"model"},{default:m((()=>[r(a,{modelValue:x.value.model,"onUpdate:modelValue":l[3]||(l[3]=e=>x.value.model=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"发送请求的model:",prop:"postModel"},{default:m((()=>[r(a,{modelValue:x.value.postModel,"onUpdate:modelValue":l[4]||(l[4]=e=>x.value.postModel=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"openai 基础设定（可选）:",prop:"basePrompt"},{default:m((()=>[r(a,{modelValue:x.value.basePrompt,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value.basePrompt=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"进入应用时的欢迎语:",prop:"welcome"},{default:m((()=>[r(a,{modelValue:x.value.welcome,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value.welcome=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"是否启用ChatGPT应用内部交流群:",prop:"groupEnable"},{default:m((()=>[r(n,{modelValue:x.value.groupEnable,"onUpdate:modelValue":l[7]||(l[7]=e=>x.value.groupEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),r(o,{label:"是否启用embedding:",prop:"embeddingEnable"},{default:m((()=>[r(n,{modelValue:x.value.embeddingEnable,"onUpdate:modelValue":l[8]||(l[8]=e=>x.value.embeddingEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),r(o,{label:"embedding的搜索模式:",prop:"embeddingMode"},{default:m((()=>[r(a,{modelValue:x.value.embeddingMode,"onUpdate:modelValue":l[9]||(l[9]=e=>x.value.embeddingMode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"分数:",prop:"score"},{default:m((()=>[r(f,{modelValue:x.value.score,"onUpdate:modelValue":l[10]||(l[10]=e=>x.value.score=e),precision:2,clearable:!0},null,8,["modelValue"])])),_:1}),r(o,{label:"topK:",prop:"topK"},{default:m((()=>[r(a,{modelValue:x.value.topK,"onUpdate:modelValue":l[11]||(l[11]=e=>x.value.topK=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"需要清理上下文的时间，按分配置，默认0不清理:",prop:"clearContextTime"},{default:m((()=>[r(a,{modelValue:x.value.clearContextTime,"onUpdate:modelValue":l[12]||(l[12]=e=>x.value.clearContextTime=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"ChatGPT群名:",prop:"groupName"},{default:m((()=>[r(a,{modelValue:x.value.groupName,"onUpdate:modelValue":l[13]||(l[13]=e=>x.value.groupName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,{label:"ChatGPT应用内部交流群chat_id:",prop:"groupChatId"},{default:m((()=>[r(a,{modelValue:x.value.groupChatId,"onUpdate:modelValue":l[14]||(l[14]=e=>x.value.groupChatId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),r(o,null,{default:m((()=>[r(g,{type:"primary",onClick:M},{default:m((()=>[p("保存")])),_:1}),r(g,{type:"primary",onClick:I},{default:m((()=>[p("返回")])),_:1})])),_:1})])),_:1},8,["model","rules"])])])}}});export{j as default};
