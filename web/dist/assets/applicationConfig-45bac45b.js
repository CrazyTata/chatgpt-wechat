/*! 
 Build based on chatgpt-wechat-admin 
 Time : 1685686675000 */
import{r as e,a as l,o as a,c as o,b as t,d,w as u,g as r,l as i,t as n,G as p,O as m,i as s,j as c,E as v}from"./index-c0e4adfc.js";import{E as g}from"./dialog-24cefcc5.js";import"./overlay-0e3768b7.js";import{E as b}from"./input-number-a9f9fe75.js";/* empty css              */import{E as f}from"./switch-bf5d3f64.js";import{E as h}from"./pagination-6acfc931.js";import"./tag-06e34f44.js";import"./select-51c947b5.js";import"./scrollbar-83387f5b.js";/* empty css               */import{E as V,a as y}from"./table-column-ce61bdda.js";import"./checkbox-4e2047b2.js";/* empty css                */import{E as w}from"./popover-3969edac.js";import{a as _,E as j}from"./form-item-2334633e.js";/* empty css               */import{E as C}from"./date-picker-8073d356.js";import{g as E,d as x,f as k,a as U,c as I,u as N}from"./applicationConfig-15b25653.js";import{f as M,a as K}from"./format-d58b80c9.js";import"./index-117497ec.js";import"./isEqual-b7679b47.js";import"./_Uint8Array-51a2700d.js";import"./index-3aa8858d.js";import"./index-6f1ff6e5.js";import"./strings-df073129.js";import"./_initCloneObject-fdddb50e.js";import"./dropdown-17261785.js";import"./_baseClone-8e8c462c.js";import"./arrays-2c626d3b.js";import"./date-225eaf4f.js";import"./dictionary-8715b49d.js";import"./sysDictionary-fa38e7c5.js";const T={class:"gva-search-box"},z={class:"gva-table-box"},A={class:"gva-btn-list"},D=t("p",null,"确定要删除吗？",-1),P={style:{"text-align":"right","margin-top":"8px"}},S={class:"gva-pagination"},O={class:"dialog-footer"},q={name:"ApplicationConfig"},B=Object.assign(q,{setup(q){const B=e({agentId:0,agentSecret:"",agentName:"",model:"",postModel:"",basePrompt:"",welcome:"",groupEnable:!1,embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0,groupName:"",groupChatId:""}),F=l({}),G=e(),R=e(1),W=e(0),X=e(10),Y=e([]),Z=e({}),$=()=>{Z.value={},Q()},H=()=>{R.value=1,X.value=10,""===Z.value.groupEnable&&(Z.value.groupEnable=null),""===Z.value.embeddingEnable&&(Z.value.embeddingEnable=null),Q()},J=e=>{X.value=e,Q()},L=e=>{R.value=e,Q()},Q=async()=>{const e=await E({page:R.value,pageSize:X.value,...Z.value});0===e.code&&(Y.value=e.data.list,W.value=e.data.total,R.value=e.data.page,X.value=e.data.pageSize)};Q();(async()=>{})();const ee=e([]),le=e=>{ee.value=e},ae=e(!1),oe=async()=>{const e=[];if(0===ee.value.length)return void s({type:"warning",message:"请选择要删除的数据"});ee.value&&ee.value.map((l=>{e.push(l.ID)}));0===(await x({ids:e})).code&&(s({type:"success",message:"删除成功"}),Y.value.length===e.length&&R.value>1&&R.value--,ae.value=!1,Q())},te=e(""),de=async e=>{0===(await U({ID:e.ID})).code&&(s({type:"success",message:"删除成功"}),1===Y.value.length&&R.value>1&&R.value--,Q())},ue=e(!1),re=()=>{te.value="create",ue.value=!0},ie=()=>{ue.value=!1,B.value={agentId:0,agentSecret:"",agentName:"",model:"",postModel:"",basePrompt:"",welcome:"",groupEnable:!1,embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0,groupName:"",groupChatId:""}},ne=async()=>{var e;null==(e=G.value)||e.validate((async e=>{if(!e)return;let l;switch(te.value){case"create":default:l=await I(B.value);break;case"update":l=await N(B.value)}0===l.code&&(s({type:"success",message:"创建/更改成功"}),ie(),Q())}))};return(e,l)=>{const s=C,E=_,x=c,U=v,I=j,N=w,q=V,Q=y,pe=h,me=f,se=b,ce=g;return a(),o("div",null,[t("div",T,[d(I,{inline:!0,model:Z.value,class:"demo-form-inline",onKeyup:i(H,["enter"])},{default:u((()=>[d(E,{label:"创建时间"},{default:u((()=>[d(s,{modelValue:Z.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>Z.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),r(" — "),d(s,{modelValue:Z.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>Z.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),d(E,{label:"应用名"},{default:u((()=>[d(x,{modelValue:Z.value.agentName,"onUpdate:modelValue":l[2]||(l[2]=e=>Z.value.agentName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(E,{label:"model"},{default:u((()=>[d(x,{modelValue:Z.value.model,"onUpdate:modelValue":l[3]||(l[3]=e=>Z.value.model=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(E,null,{default:u((()=>[d(U,{type:"primary",icon:"search",onClick:H},{default:u((()=>[r("查询")])),_:1}),d(U,{icon:"refresh",onClick:$},{default:u((()=>[r("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),t("div",z,[t("div",A,[d(U,{type:"primary",icon:"plus",onClick:re},{default:u((()=>[r("新增")])),_:1}),d(N,{visible:ae.value,"onUpdate:visible":l[6]||(l[6]=e=>ae.value=e),placement:"top",width:"160"},{reference:u((()=>[d(U,{icon:"delete",style:{"margin-left":"10px"},disabled:!ee.value.length,onClick:l[5]||(l[5]=e=>ae.value=!0)},{default:u((()=>[r("删除")])),_:1},8,["disabled"])])),default:u((()=>[D,t("div",P,[d(U,{type:"primary",link:"",onClick:l[4]||(l[4]=e=>ae.value=!1)},{default:u((()=>[r("取消")])),_:1}),d(U,{type:"primary",onClick:oe},{default:u((()=>[r("确定")])),_:1})])])),_:1},8,["visible"])]),d(Q,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Y.value,"row-key":"ID",onSelectionChange:le},{default:u((()=>[d(q,{type:"selection",width:"55"}),d(q,{align:"left",label:"日期",width:"160"},{default:u((e=>[r(n(p(M)(e.row.CreatedAt)),1)])),_:1}),d(q,{align:"left",label:"应用",prop:"agentName",width:"80"}),d(q,{align:"left",label:"model",prop:"postModel",width:"80"}),d(q,{align:"left",label:"prompt",prop:"basePrompt",width:"200"}),d(q,{align:"left",label:"欢迎语",prop:"welcome",width:"200"}),d(q,{align:"left",label:"启用EM",prop:"embeddingEnable",width:"50"},{default:u((e=>[r(n(p(K)(e.row.embeddingEnable)),1)])),_:1}),d(q,{align:"left",label:"搜索模式",prop:"embeddingMode",width:"80"}),d(q,{align:"left",label:"分数",prop:"score",width:"60"}),d(q,{align:"left",label:"topK",prop:"topK",width:"60"}),d(q,{align:"left",label:"清理时间",prop:"clearContextTime",width:"60"}),d(q,{align:"left",label:"启用群",prop:"groupEnable",width:"60"},{default:u((e=>[r(n(p(K)(e.row.groupEnable)),1)])),_:1}),d(q,{align:"left",label:"群名",prop:"groupName",width:"60"}),d(q,{align:"left",label:"群chat_id",prop:"groupChatId",width:"60"}),d(q,{align:"left",label:"按钮组"},{default:u((e=>[d(U,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await k({ID:e.ID});te.value="update",0===l.code&&(B.value=l.data.reapplicationConfig,ue.value=!0)})(e.row)},{default:u((()=>[r("变更")])),_:2},1032,["onClick"]),d(U,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{de(a)}));var a}},{default:u((()=>[r("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),t("div",S,[d(pe,{layout:"total, sizes, prev, pager, next, jumper","current-page":R.value,"page-size":X.value,"page-sizes":[10,30,50,100],total:W.value,onCurrentChange:L,onSizeChange:J},null,8,["current-page","page-size","total"])])]),d(ce,{modelValue:ue.value,"onUpdate:modelValue":l[19]||(l[19]=e=>ue.value=e),"before-close":ie,title:"弹窗操作"},{footer:u((()=>[t("div",O,[d(U,{onClick:ie},{default:u((()=>[r("取 消")])),_:1}),d(U,{type:"primary",onClick:ne},{default:u((()=>[r("确 定")])),_:1})])])),default:u((()=>[d(I,{model:B.value,"label-position":"right",ref_key:"elFormRef",ref:G,rules:F,"label-width":"80px"},{default:u((()=>[d(E,{label:"应用:",prop:"agentName"},{default:u((()=>[d(x,{modelValue:B.value.agentName,"onUpdate:modelValue":l[7]||(l[7]=e=>B.value.agentName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"model:",prop:"model"},{default:u((()=>[d(x,{modelValue:B.value.model,"onUpdate:modelValue":l[8]||(l[8]=e=>B.value.model=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"prompt:",prop:"basePrompt"},{default:u((()=>[d(x,{modelValue:B.value.basePrompt,"onUpdate:modelValue":l[9]||(l[9]=e=>B.value.basePrompt=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"欢迎语:",prop:"welcome"},{default:u((()=>[d(x,{modelValue:B.value.welcome,"onUpdate:modelValue":l[10]||(l[10]=e=>B.value.welcome=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"启用EM:",prop:"embeddingEnable"},{default:u((()=>[d(me,{modelValue:B.value.embeddingEnable,"onUpdate:modelValue":l[11]||(l[11]=e=>B.value.embeddingEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),d(E,{label:"搜索模式:",prop:"embeddingMode"},{default:u((()=>[d(x,{modelValue:B.value.embeddingMode,"onUpdate:modelValue":l[12]||(l[12]=e=>B.value.embeddingMode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"分数:",prop:"score"},{default:u((()=>[d(se,{modelValue:B.value.score,"onUpdate:modelValue":l[13]||(l[13]=e=>B.value.score=e),style:{width:"100%"},precision:2,clearable:!0},null,8,["modelValue"])])),_:1}),d(E,{label:"topK:",prop:"topK"},{default:u((()=>[d(x,{modelValue:B.value.topK,"onUpdate:modelValue":l[14]||(l[14]=e=>B.value.topK=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"清理时间:",prop:"clearContextTime"},{default:u((()=>[d(x,{modelValue:B.value.clearContextTime,"onUpdate:modelValue":l[15]||(l[15]=e=>B.value.clearContextTime=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"启用群:",prop:"groupEnable"},{default:u((()=>[d(me,{modelValue:B.value.groupEnable,"onUpdate:modelValue":l[16]||(l[16]=e=>B.value.groupEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),d(E,{label:"群名:",prop:"groupName"},{default:u((()=>[d(x,{modelValue:B.value.groupName,"onUpdate:modelValue":l[17]||(l[17]=e=>B.value.groupName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"群chat_id:",prop:"groupChatId"},{default:u((()=>[d(x,{modelValue:B.value.groupChatId,"onUpdate:modelValue":l[18]||(l[18]=e=>B.value.groupChatId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{B as default};
