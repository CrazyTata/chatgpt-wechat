/*! 
 Build based on gin-vue-admin 
 Time : 1685443405000 */
import{r as e,a as l,o as a,c as o,b as t,d,w as u,g as r,l as n,t as p,G as i,O as m,i as s,j as c,E as g}from"./index-fb186a27.js";import{E as b}from"./dialog-f3f38414.js";import"./overlay-5f8f1514.js";import{E as v}from"./input-number-9db357c3.js";/* empty css              */import{E as f}from"./switch-db0e60fb.js";import{E as h}from"./pagination-07fd0df6.js";import"./tag-b25f7d90.js";import"./select-60e97982.js";import"./scrollbar-a691389d.js";/* empty css               */import{E as V,a as w}from"./table-column-294ba462.js";import"./checkbox-1cb7dc6b.js";/* empty css                */import{E as _}from"./popover-317f64ca.js";import{a as y,E as C}from"./form-item-019c124a.js";/* empty css               */import{E as j}from"./date-picker-5b7d5d51.js";import{g as E,d as x,f as k,a as U,c as I,u as M}from"./applicationConfig-139f189d.js";import{f as T,a as N}from"./format-263e5778.js";import"./index-34e0c723.js";import"./isEqual-3814c5fc.js";import"./_Uint8Array-78093811.js";import"./index-9dd35ef0.js";import"./index-3a8911e7.js";import"./strings-e9f6e17e.js";import"./_initCloneObject-3042abe3.js";import"./dropdown-34aebfe5.js";import"./_baseClone-b86febe7.js";import"./arrays-2c626d3b.js";import"./date-225eaf4f.js";import"./dictionary-2fb273d4.js";import"./sysDictionary-f8cc9986.js";const P={class:"gva-search-box"},K={class:"gva-table-box"},S={class:"gva-btn-list"},z=t("p",null,"确定要删除吗？",-1),A={style:{"text-align":"right","margin-top":"8px"}},D={class:"gva-pagination"},G={class:"dialog-footer"},O={name:"ApplicationConfig"},q=Object.assign(O,{setup(O){const q=e({agentId:0,agentSecret:"",agentName:"",model:"",postModel:"",basePrompt:"",welcome:"",groupEnable:!1,embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0,groupName:"",groupChatId:""}),B=l({}),F=e(),R=e(1),W=e(0),X=e(10),Y=e([]),Z=e({}),$=()=>{Z.value={},Q()},H=()=>{R.value=1,X.value=10,""===Z.value.groupEnable&&(Z.value.groupEnable=null),""===Z.value.embeddingEnable&&(Z.value.embeddingEnable=null),Q()},J=e=>{X.value=e,Q()},L=e=>{R.value=e,Q()},Q=async()=>{const e=await E({page:R.value,pageSize:X.value,...Z.value});0===e.code&&(Y.value=e.data.list,W.value=e.data.total,R.value=e.data.page,X.value=e.data.pageSize)};Q();(async()=>{})();const ee=e([]),le=e=>{ee.value=e},ae=e(!1),oe=async()=>{const e=[];if(0===ee.value.length)return void s({type:"warning",message:"请选择要删除的数据"});ee.value&&ee.value.map((l=>{e.push(l.ID)}));0===(await x({ids:e})).code&&(s({type:"success",message:"删除成功"}),Y.value.length===e.length&&R.value>1&&R.value--,ae.value=!1,Q())},te=e(""),de=async e=>{0===(await U({ID:e.ID})).code&&(s({type:"success",message:"删除成功"}),1===Y.value.length&&R.value>1&&R.value--,Q())},ue=e(!1),re=()=>{te.value="create",ue.value=!0},ne=()=>{ue.value=!1,q.value={agentId:0,agentSecret:"",agentName:"",model:"",postModel:"",basePrompt:"",welcome:"",groupEnable:!1,embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0,groupName:"",groupChatId:""}},pe=async()=>{var e;null==(e=F.value)||e.validate((async e=>{if(!e)return;let l;switch(te.value){case"create":default:l=await I(q.value);break;case"update":l=await M(q.value)}0===l.code&&(s({type:"success",message:"创建/更改成功"}),ne(),Q())}))};return(e,l)=>{const s=j,E=y,x=c,U=g,I=C,M=_,O=V,Q=w,ie=h,me=f,se=v,ce=b;return a(),o("div",null,[t("div",P,[d(I,{inline:!0,model:Z.value,class:"demo-form-inline",onKeyup:n(H,["enter"])},{default:u((()=>[d(E,{label:"创建时间"},{default:u((()=>[d(s,{modelValue:Z.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>Z.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),r(" — "),d(s,{modelValue:Z.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>Z.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),d(E,{label:"应用名"},{default:u((()=>[d(x,{modelValue:Z.value.agentName,"onUpdate:modelValue":l[2]||(l[2]=e=>Z.value.agentName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(E,{label:"model"},{default:u((()=>[d(x,{modelValue:Z.value.model,"onUpdate:modelValue":l[3]||(l[3]=e=>Z.value.model=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(E,null,{default:u((()=>[d(U,{type:"primary",icon:"search",onClick:H},{default:u((()=>[r("查询")])),_:1}),d(U,{icon:"refresh",onClick:$},{default:u((()=>[r("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),t("div",K,[t("div",S,[d(U,{type:"primary",icon:"plus",onClick:re},{default:u((()=>[r("新增")])),_:1}),d(M,{visible:ae.value,"onUpdate:visible":l[6]||(l[6]=e=>ae.value=e),placement:"top",width:"160"},{reference:u((()=>[d(U,{icon:"delete",style:{"margin-left":"10px"},disabled:!ee.value.length,onClick:l[5]||(l[5]=e=>ae.value=!0)},{default:u((()=>[r("删除")])),_:1},8,["disabled"])])),default:u((()=>[z,t("div",A,[d(U,{type:"primary",link:"",onClick:l[4]||(l[4]=e=>ae.value=!1)},{default:u((()=>[r("取消")])),_:1}),d(U,{type:"primary",onClick:oe},{default:u((()=>[r("确定")])),_:1})])])),_:1},8,["visible"])]),d(Q,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Y.value,"row-key":"ID",onSelectionChange:le},{default:u((()=>[d(O,{type:"selection",width:"55"}),d(O,{align:"left",label:"日期",width:"180"},{default:u((e=>[r(p(i(T)(e.row.CreatedAt)),1)])),_:1}),d(O,{align:"left",label:"应用",prop:"agentId",width:"120"}),d(O,{align:"left",label:"应用secret",prop:"agentSecret",width:"120"}),d(O,{align:"left",label:"应用名",prop:"agentName",width:"120"}),d(O,{align:"left",label:"model",prop:"model",width:"120"}),d(O,{align:"left",label:"发送请求的model",prop:"postModel",width:"120"}),d(O,{align:"left",label:"openai 基础设定（可选）",prop:"basePrompt",width:"120"}),d(O,{align:"left",label:"进入应用时的欢迎语",prop:"welcome",width:"120"}),d(O,{align:"left",label:"是否启用ChatGPT应用内部交流群",prop:"groupEnable",width:"120"},{default:u((e=>[r(p(i(N)(e.row.groupEnable)),1)])),_:1}),d(O,{align:"left",label:"是否启用embedding",prop:"embeddingEnable",width:"120"},{default:u((e=>[r(p(i(N)(e.row.embeddingEnable)),1)])),_:1}),d(O,{align:"left",label:"embedding的搜索模式",prop:"embeddingMode",width:"120"}),d(O,{align:"left",label:"分数",prop:"score",width:"120"}),d(O,{align:"left",label:"topK",prop:"topK",width:"120"}),d(O,{align:"left",label:"需要清理上下文的时间，按分配置，默认0不清理",prop:"clearContextTime",width:"120"}),d(O,{align:"left",label:"ChatGPT群名",prop:"groupName",width:"120"}),d(O,{align:"left",label:"ChatGPT应用内部交流群chat_id",prop:"groupChatId",width:"120"}),d(O,{align:"left",label:"按钮组"},{default:u((e=>[d(U,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await k({ID:e.ID});te.value="update",0===l.code&&(q.value=l.data.reapplicationConfig,ue.value=!0)})(e.row)},{default:u((()=>[r("变更")])),_:2},1032,["onClick"]),d(U,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{de(a)}));var a}},{default:u((()=>[r("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),t("div",D,[d(ie,{layout:"total, sizes, prev, pager, next, jumper","current-page":R.value,"page-size":X.value,"page-sizes":[10,30,50,100],total:W.value,onCurrentChange:L,onSizeChange:J},null,8,["current-page","page-size","total"])])]),d(ce,{modelValue:ue.value,"onUpdate:modelValue":l[22]||(l[22]=e=>ue.value=e),"before-close":ne,title:"弹窗操作"},{footer:u((()=>[t("div",G,[d(U,{onClick:ne},{default:u((()=>[r("取 消")])),_:1}),d(U,{type:"primary",onClick:pe},{default:u((()=>[r("确 定")])),_:1})])])),default:u((()=>[d(I,{model:q.value,"label-position":"right",ref_key:"elFormRef",ref:F,rules:B,"label-width":"80px"},{default:u((()=>[d(E,{label:"应用:",prop:"agentId"},{default:u((()=>[d(x,{modelValue:q.value.agentId,"onUpdate:modelValue":l[7]||(l[7]=e=>q.value.agentId=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"应用secret:",prop:"agentSecret"},{default:u((()=>[d(x,{modelValue:q.value.agentSecret,"onUpdate:modelValue":l[8]||(l[8]=e=>q.value.agentSecret=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"应用名:",prop:"agentName"},{default:u((()=>[d(x,{modelValue:q.value.agentName,"onUpdate:modelValue":l[9]||(l[9]=e=>q.value.agentName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"model:",prop:"model"},{default:u((()=>[d(x,{modelValue:q.value.model,"onUpdate:modelValue":l[10]||(l[10]=e=>q.value.model=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"发送请求的model:",prop:"postModel"},{default:u((()=>[d(x,{modelValue:q.value.postModel,"onUpdate:modelValue":l[11]||(l[11]=e=>q.value.postModel=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"openai 基础设定（可选）:",prop:"basePrompt"},{default:u((()=>[d(x,{modelValue:q.value.basePrompt,"onUpdate:modelValue":l[12]||(l[12]=e=>q.value.basePrompt=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"进入应用时的欢迎语:",prop:"welcome"},{default:u((()=>[d(x,{modelValue:q.value.welcome,"onUpdate:modelValue":l[13]||(l[13]=e=>q.value.welcome=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"是否启用ChatGPT应用内部交流群:",prop:"groupEnable"},{default:u((()=>[d(me,{modelValue:q.value.groupEnable,"onUpdate:modelValue":l[14]||(l[14]=e=>q.value.groupEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),d(E,{label:"是否启用embedding:",prop:"embeddingEnable"},{default:u((()=>[d(me,{modelValue:q.value.embeddingEnable,"onUpdate:modelValue":l[15]||(l[15]=e=>q.value.embeddingEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),d(E,{label:"embedding的搜索模式:",prop:"embeddingMode"},{default:u((()=>[d(x,{modelValue:q.value.embeddingMode,"onUpdate:modelValue":l[16]||(l[16]=e=>q.value.embeddingMode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"分数:",prop:"score"},{default:u((()=>[d(se,{modelValue:q.value.score,"onUpdate:modelValue":l[17]||(l[17]=e=>q.value.score=e),style:{width:"100%"},precision:2,clearable:!0},null,8,["modelValue"])])),_:1}),d(E,{label:"topK:",prop:"topK"},{default:u((()=>[d(x,{modelValue:q.value.topK,"onUpdate:modelValue":l[18]||(l[18]=e=>q.value.topK=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"需要清理上下文的时间，按分配置，默认0不清理:",prop:"clearContextTime"},{default:u((()=>[d(x,{modelValue:q.value.clearContextTime,"onUpdate:modelValue":l[19]||(l[19]=e=>q.value.clearContextTime=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"ChatGPT群名:",prop:"groupName"},{default:u((()=>[d(x,{modelValue:q.value.groupName,"onUpdate:modelValue":l[20]||(l[20]=e=>q.value.groupName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(E,{label:"ChatGPT应用内部交流群chat_id:",prop:"groupChatId"},{default:u((()=>[d(x,{modelValue:q.value.groupChatId,"onUpdate:modelValue":l[21]||(l[21]=e=>q.value.groupChatId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{q as default};
