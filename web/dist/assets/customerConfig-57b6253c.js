/*! 
 Build based on gin-vue-admin 
 Time : 1685443405000 */
import{r as e,a as l,o as a,c as t,b as o,d,w as i,g as r,l as u,t as n,G as p,O as s,i as m,j as c,E as f}from"./index-fb186a27.js";import{E as v}from"./dialog-f3f38414.js";import"./overlay-5f8f1514.js";import{E as b}from"./input-number-9db357c3.js";/* empty css              */import{E as g}from"./switch-db0e60fb.js";import{E as h}from"./pagination-07fd0df6.js";import"./tag-b25f7d90.js";import"./select-60e97982.js";import"./scrollbar-a691389d.js";/* empty css               */import{E as y,a as V}from"./table-column-294ba462.js";import"./checkbox-1cb7dc6b.js";/* empty css                */import{E as k}from"./popover-317f64ca.js";import{a as j,E as _}from"./form-item-019c124a.js";/* empty css               */import{E as C}from"./date-picker-5b7d5d51.js";import{g as w,d as x,f as E,a as U,c as I,u as M}from"./customerConfig-62cc7e3b.js";import{f as N,a as K}from"./format-263e5778.js";import"./index-34e0c723.js";import"./isEqual-3814c5fc.js";import"./_Uint8Array-78093811.js";import"./index-9dd35ef0.js";import"./index-3a8911e7.js";import"./strings-e9f6e17e.js";import"./_initCloneObject-3042abe3.js";import"./dropdown-34aebfe5.js";import"./_baseClone-b86febe7.js";import"./arrays-2c626d3b.js";import"./date-225eaf4f.js";import"./dictionary-2fb273d4.js";import"./sysDictionary-f8cc9986.js";const D={class:"gva-search-box"},T={class:"gva-table-box"},z={class:"gva-btn-list"},A=o("p",null,"确定要删除吗？",-1),S={style:{"text-align":"right","margin-top":"8px"}},O={class:"gva-pagination"},q={class:"dialog-footer"},B={name:"CustomerConfig"},F=Object.assign(B,{setup(B){const F=e({kfId:"",kfName:"",prompt:"",postModel:"",embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0}),G=l({}),R=e(),W=e(1),X=e(0),Y=e(10),Z=e([]),$=e({}),H=()=>{$.value={},Q()},J=()=>{W.value=1,Y.value=10,""===$.value.embeddingEnable&&($.value.embeddingEnable=null),Q()},L=e=>{Y.value=e,Q()},P=e=>{W.value=e,Q()},Q=async()=>{const e=await w({page:W.value,pageSize:Y.value,...$.value});0===e.code&&(Z.value=e.data.list,X.value=e.data.total,W.value=e.data.page,Y.value=e.data.pageSize)};Q();(async()=>{})();const ee=e([]),le=e=>{ee.value=e},ae=e(!1),te=async()=>{const e=[];if(0===ee.value.length)return void m({type:"warning",message:"请选择要删除的数据"});ee.value&&ee.value.map((l=>{e.push(l.ID)}));0===(await x({ids:e})).code&&(m({type:"success",message:"删除成功"}),Z.value.length===e.length&&W.value>1&&W.value--,ae.value=!1,Q())},oe=e(""),de=async e=>{0===(await U({ID:e.ID})).code&&(m({type:"success",message:"删除成功"}),1===Z.value.length&&W.value>1&&W.value--,Q())},ie=e(!1),re=()=>{oe.value="create",ie.value=!0},ue=()=>{ie.value=!1,F.value={kfId:"",kfName:"",prompt:"",postModel:"",embeddingEnable:!1,embeddingMode:"",score:0,topK:0,clearContextTime:0}},ne=async()=>{var e;null==(e=R.value)||e.validate((async e=>{if(!e)return;let l;switch(oe.value){case"create":default:l=await I(F.value);break;case"update":l=await M(F.value)}0===l.code&&(m({type:"success",message:"创建/更改成功"}),ue(),Q())}))};return(e,l)=>{const m=C,w=j,x=c,U=f,I=_,M=k,B=y,Q=V,pe=h,se=g,me=b,ce=v;return a(),t("div",null,[o("div",D,[d(I,{inline:!0,model:$.value,class:"demo-form-inline",onKeyup:u(J,["enter"])},{default:i((()=>[d(w,{label:"创建时间"},{default:i((()=>[d(m,{modelValue:$.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>$.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),r(" — "),d(m,{modelValue:$.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>$.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),d(w,{label:"kfName字段"},{default:i((()=>[d(x,{modelValue:$.value.kfName,"onUpdate:modelValue":l[2]||(l[2]=e=>$.value.kfName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),d(w,null,{default:i((()=>[d(U,{type:"primary",icon:"search",onClick:J},{default:i((()=>[r("查询")])),_:1}),d(U,{icon:"refresh",onClick:H},{default:i((()=>[r("重置")])),_:1})])),_:1})])),_:1},8,["model","onKeyup"])]),o("div",T,[o("div",z,[d(U,{type:"primary",icon:"plus",onClick:re},{default:i((()=>[r("新增")])),_:1}),d(M,{visible:ae.value,"onUpdate:visible":l[5]||(l[5]=e=>ae.value=e),placement:"top",width:"160"},{reference:i((()=>[d(U,{icon:"delete",style:{"margin-left":"10px"},disabled:!ee.value.length,onClick:l[4]||(l[4]=e=>ae.value=!0)},{default:i((()=>[r("删除")])),_:1},8,["disabled"])])),default:i((()=>[A,o("div",S,[d(U,{type:"primary",link:"",onClick:l[3]||(l[3]=e=>ae.value=!1)},{default:i((()=>[r("取消")])),_:1}),d(U,{type:"primary",onClick:te},{default:i((()=>[r("确定")])),_:1})])])),_:1},8,["visible"])]),d(Q,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Z.value,"row-key":"ID",onSelectionChange:le},{default:i((()=>[d(B,{type:"selection",width:"55"}),d(B,{align:"left",label:"日期",width:"180"},{default:i((e=>[r(n(p(N)(e.row.CreatedAt)),1)])),_:1}),d(B,{align:"left",label:"客服ID",prop:"kfId",width:"120"}),d(B,{align:"left",label:"kfName字段",prop:"kfName",width:"120"}),d(B,{align:"left",label:"prompt字段",prop:"prompt",width:"120"}),d(B,{align:"left",label:"发送请求的model",prop:"postModel",width:"120"}),d(B,{align:"left",label:"是否启用embedding",prop:"embeddingEnable",width:"120"},{default:i((e=>[r(n(p(K)(e.row.embeddingEnable)),1)])),_:1}),d(B,{align:"left",label:"embedding的搜索模式",prop:"embeddingMode",width:"120"}),d(B,{align:"left",label:"分数",prop:"score",width:"120"}),d(B,{align:"left",label:"topK",prop:"topK",width:"120"}),d(B,{align:"left",label:"需要清理上下文的时间，按分配置，默认0不清理",prop:"clearContextTime",width:"120"}),d(B,{align:"left",label:"按钮组"},{default:i((e=>[d(U,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:l=>(async e=>{const l=await E({ID:e.ID});oe.value="update",0===l.code&&(F.value=l.data.recustomerConfig,ie.value=!0)})(e.row)},{default:i((()=>[r("变更")])),_:2},1032,["onClick"]),d(U,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row,void s.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{de(a)}));var a}},{default:i((()=>[r("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",O,[d(pe,{layout:"total, sizes, prev, pager, next, jumper","current-page":W.value,"page-size":Y.value,"page-sizes":[10,30,50,100],total:X.value,onCurrentChange:P,onSizeChange:L},null,8,["current-page","page-size","total"])])]),d(ce,{modelValue:ie.value,"onUpdate:modelValue":l[15]||(l[15]=e=>ie.value=e),"before-close":ue,title:"弹窗操作"},{footer:i((()=>[o("div",q,[d(U,{onClick:ue},{default:i((()=>[r("取 消")])),_:1}),d(U,{type:"primary",onClick:ne},{default:i((()=>[r("确 定")])),_:1})])])),default:i((()=>[d(I,{model:F.value,"label-position":"right",ref_key:"elFormRef",ref:R,rules:G,"label-width":"80px"},{default:i((()=>[d(w,{label:"客服ID:",prop:"kfId"},{default:i((()=>[d(x,{modelValue:F.value.kfId,"onUpdate:modelValue":l[6]||(l[6]=e=>F.value.kfId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"kfName字段:",prop:"kfName"},{default:i((()=>[d(x,{modelValue:F.value.kfName,"onUpdate:modelValue":l[7]||(l[7]=e=>F.value.kfName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"prompt字段:",prop:"prompt"},{default:i((()=>[d(x,{modelValue:F.value.prompt,"onUpdate:modelValue":l[8]||(l[8]=e=>F.value.prompt=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"发送请求的model:",prop:"postModel"},{default:i((()=>[d(x,{modelValue:F.value.postModel,"onUpdate:modelValue":l[9]||(l[9]=e=>F.value.postModel=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"是否启用embedding:",prop:"embeddingEnable"},{default:i((()=>[d(se,{modelValue:F.value.embeddingEnable,"onUpdate:modelValue":l[10]||(l[10]=e=>F.value.embeddingEnable=e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否",clearable:""},null,8,["modelValue"])])),_:1}),d(w,{label:"embedding的搜索模式:",prop:"embeddingMode"},{default:i((()=>[d(x,{modelValue:F.value.embeddingMode,"onUpdate:modelValue":l[11]||(l[11]=e=>F.value.embeddingMode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"分数:",prop:"score"},{default:i((()=>[d(me,{modelValue:F.value.score,"onUpdate:modelValue":l[12]||(l[12]=e=>F.value.score=e),style:{width:"100%"},precision:2,clearable:!0},null,8,["modelValue"])])),_:1}),d(w,{label:"topK:",prop:"topK"},{default:i((()=>[d(x,{modelValue:F.value.topK,"onUpdate:modelValue":l[13]||(l[13]=e=>F.value.topK=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),d(w,{label:"需要清理上下文的时间，按分配置，默认0不清理:",prop:"clearContextTime"},{default:i((()=>[d(x,{modelValue:F.value.clearContextTime,"onUpdate:modelValue":l[14]||(l[14]=e=>F.value.clearContextTime=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{F as default};
